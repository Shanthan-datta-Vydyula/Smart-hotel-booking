<div class="container mt-5 mb-5">
 <div class="row justify-content-center">
  <div class="col-md-6">
   <div class="card shadow-sm">
    <div class="card-header bg-primary text-white text-center py-3">
     <h3>Smart Hotel Booking</h3>
     <p class="mb-0">Join us today</p>
    </div>
    <div class="card-body p-4">
      
      <div *ngIf="errorMessage" class="alert alert-danger">
        {{ errorMessage }}
      </div>
      
      <form #registerForm="ngForm" (ngSubmit)="onSubmit(registerForm)">
        
        <div class="mb-3">
          <label for="fullName" class="form-label">Your Name</label>
          <div class="input-group" [ngClass]="{'shake-animation': fullName.invalid && fullName.touched}">
            <span class="input-group-text" [ngClass]="{'error-icon': fullName.invalid && fullName.touched}">
              <i class="bi bi-person"></i>
            </span>
            <input 
              type="text" 
              class="form-control" 
              id="fullName" 
              name="fullName"
              #fullName="ngModel"
              [(ngModel)]="user.fullName"
              placeholder="Jay Tiwari" 
              required
              pattern="^[A-Za-z\s]+$"
              minlength="2"
              [ngClass]="{'error-border': fullName.invalid && fullName.touched}"
            >
              </div>
          <div *ngIf="fullName.invalid && fullName.touched" class="error-text">
            <small *ngIf="fullName.errors?.['required']">Name is required</small>
            <small *ngIf="fullName.errors?.['pattern']">Name should contain only letters and spaces</small>
            <small *ngIf="fullName.errors?.['minlength']">Name must be at least 2 characters long</small>
          </div>
        </div>
      
        <div class="mb-3">
         <label for="email" class="form-label">Email</label>
         <div class="input-group" [ngClass]="{'shake-animation': email.invalid && email.touched}">
          <span class="input-group-text" [ngClass]="{'error-icon': email.invalid && email.touched}">
                <i class="bi bi-envelope"></i>
              </span>
              <input 
                type="email" 
                class="form-control" 
                id="email" 
                name="email"
                #email="ngModel"
                [(ngModel)]="user.email"
                placeholder="you@example.com" 
                required
                email
                [ngClass]="{'error-border': email.invalid && email.touched}"
              >
              </div>
              <div *ngIf="email.invalid && email.touched" class="error-text">
                <small *ngIf="email.errors?.['required']">Email is required</small>
                <small *ngIf="email.errors?.['email']">Please enter a valid email address</small>
              </div>
              <div class="form-text">
                Email format: example@domain.com
              </div>
            </div>
            
            
            <div class="mb-3">
              <label for="password" class="form-label">Password</label>
              <div class="input-group" [ngClass]="{'shake-animation': password.invalid && password.touched}">
                <span class="input-group-text" [ngClass]="{'error-icon': password.invalid && password.touched}">
                  <i class="bi bi-lock"></i>
                </span>
                <input 
                  type="password" 
                  class="form-control" 
                  id="password" 
                  name="password"
                  #password="ngModel"
                  [(ngModel)]="user.password"
                  placeholder="At least 6 characters" 
                  required
                  minlength="6"
                  pattern="^(?=.*[A-Za-z])(?=.*\d)[A-Za-z\d@$!%*#?&]{6,}$"
                  [ngClass]="{'error-border': password.invalid && password.touched}"
                >
              </div>
              <div *ngIf="password.invalid && password.touched" class="error-text">
                <small *ngIf="password.errors?.['required']">Password is required</small>
                <small *ngIf="password.errors?.['minlength']">Password must be at least 6 characters long</small>
                <small *ngIf="password.errors?.['pattern']">Password must contain both letters and numbers</small>
              </div>
              <div class="form-text">
                Password must be at least 6 characters with letters and numbers.
              </div>
            </div>
             
            <div class="mb-3">
              <label for="confirmPassword" class="form-label">Confirm Password</label>
              <div class="input-group" [ngClass]="{'shake-animation': confirmPassword.invalid && confirmPassword.touched || !validatePasswordMatch() && confirmPassword.touched}">
                <span class="input-group-text" [ngClass]="{'error-icon': confirmPassword.invalid && confirmPassword.touched || !validatePasswordMatch() && confirmPassword.touched}">
                  <i class="bi bi-lock-fill"></i>
                </span>
                <input 
                  type="password" 
                  class="form-control" 
                  id="confirmPassword" 
                  name="confirmPassword"
                  #confirmPassword="ngModel"
                  [(ngModel)]="user.confirmPassword"
                  placeholder="Re-enter your password" 
                  required
                  [ngClass]="{'error-border': confirmPassword.invalid && confirmPassword.touched || !validatePasswordMatch() && confirmPassword.touched}"
                >
              </div>
              <div *ngIf="(confirmPassword.invalid && confirmPassword.touched) || (!validatePasswordMatch() && confirmPassword.touched)" class="error-text">
                <small *ngIf="confirmPassword.errors?.['required']">Please confirm your password</small>
                <small *ngIf="!validatePasswordMatch() && confirmPassword.value">Passwords do not match</small>
              </div>
            </div>
            
          <div class="mb-3 form-check">
           <input 
            type="checkbox" 
            class="form-check-input" 
            id="agreeTerms"
            name="agreeTerms"
            #agreeTerms="ngModel"
            [(ngModel)]="user.agreeTerms"
            required
            [ngClass]="{'error-border': agreeTerms.invalid && agreeTerms.touched}"
           >
              <label class="form-check-label" for="agreeTerms" [ngClass]="{'error-text': agreeTerms.invalid && agreeTerms.touched}">
                I accept the <a href="#" data-bs-toggle="modal" data-bs-target="#termsModal" class="text-decoration-none">Terms and Conditions</a>
              </label>
              <div *ngIf="agreeTerms.invalid && agreeTerms.touched" class="error-text">
                <small>Please accept the Terms and Conditions to continue</small>
              </div>
            </div>
            
             
            <div class="d-grid gap-2">
             <button 
               type="submit" 
               class="btn btn-primary btn-lg"
               [disabled]="registerForm.invalid || !validatePasswordMatch()"
             >
               Create Account
             </button>
            </div>
          </form>
        </div>
       <div class="card-footer text-center py-3 bg-light">
         <p class="mb-0">Have an account? Use the Login button at the top.</p>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="termsModal" tabindex="-1" aria-labelledby="termsModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable">
    <div class="modal-content">
      <div class="modal-header bg-primary text-white">
       <h5 class="modal-title" id="termsModalLabel">Terms & Conditions</h5>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <p>Welcome to Smart Hotel Booking! These Terms & Conditions explain our services and your responsibilities.</p>
        
       <h6 class="mt-3">1. Your Account</h6>
        <p>You're responsible for keeping your account details accurate and your password secure. Don't share your login info with others.</p>
        
        <h6 class="mt-3">2. Bookings</h6>
      <p>Hotel availability varies by season. We'll do our best to ensure your booking is confirmed, but sometimes changes happen. We'll notify you ASAP if there's an issue.</p>
        
        <h6 class="mt-3">3. Cancellations</h6>
        <p>Cancellation policies differ between hotels. Some allow free cancellation up to 24 hours before check-in, others have stricter policies. Always check the specific hotel's rules before booking.</p>
        
      <h6 class="mt-3">4. Privacy</h6>
        <p>We take your privacy seriously. Your data is handled according to our <a href="#" class="text-decoration-none">Privacy Policy</a>.</p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary" data-bs-dismiss="modal" (click)="acceptTerms()">I Accept</button>
      </div>
    </div>
  </div>
</div>

